<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Who's The Imposter — Private Game</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app" class="container">
    <header>
      <h1>Who's The Imposter</h1>
      <div style="display:flex;gap:10px;align-items:center;">
        <button id="howBtn" class="small-ghost">How to play</button>
        <div id="errorBox" class="error-box hidden"></div>
      </div>
    </header>

    <!-- How to play modal -->
    <div id="modalOverlay" class="modal hidden">
      <div class="modal-content">
        <h2>How to play</h2>
        <ol>
          <li>Host creates a room and shares the code or link.</li>
          <li>Everyone joins and sets a unique name.</li>
          <li>Host starts the round — most players get the same majority question; one Imposter gets a different one.</li>
          <li>Each player selects one person and clicks <b>Submit Answer</b>.</li>
          <li>When all have submitted, the majority question and answers are revealed.</li>
          <li>Discuss, select a player, and click <b>Submit Vote</b>.</li>
          <li>After results, the host clicks <b>End Round (Next)</b> to continue.</li>
        </ol>
        <div style="text-align:right;margin-top:12px;">
          <button id="closeModal" class="small-ghost">Close</button>
        </div>
      </div>
    </div>

    <main id="main">
      <section id="join" class="card">
        <label>Your name
          <input id="nameInput" placeholder="e.g. Chris" />
        </label>

        <div class="row">
          <button id="createBtn">Create Room</button>
          <input id="codeInput" placeholder="Room code (ABCD)" maxlength="6" />
          <button id="joinBtn">Join Room</button>
        </div>
        <p class="muted small">Host creates a room and shares the code/link with friends.</p>
      </section>

      <section id="lobby" class="card hidden">
        <div class="room-header">
          <div>Room <span id="roomCode"></span></div>
          <div>Round: <span id="roundNum">0</span></div>
        </div>

        <div id="playersList"></div>

        <div class="controls">
          <button id="startRoundBtn">Start Round</button>
          <button id="leaveBtn" class="red">Leave Room</button>
          <button id="endRoundBtn" class="red hidden">End Round (Next)</button>
        </div>
      </section>

      <section id="playArea" class="card hidden">
        <div id="yourSecret" class="secret card-small">
          <h3>Your secret</h3>
          <div id="yourQuestionText"></div>
          <p class="muted small">Select one person, then click Submit Answer</p>
          <div id="answerButtons"></div>
          <div style="margin-top:8px">
            <button id="submitAnswerBtn" class="disabled" disabled>Submit Answer</button>
            <span id="submissionCounter" class="muted small" style="margin-left:12px;"></span>
          </div>
          <div id="submittedMsg" class="muted small hidden">Answer submitted — waiting for others...</div>
        </div>

        <div id="revealArea" class="hidden">
          <h3>Majority question</h3>
          <div id="majorityQuestion" class="bigtext"></div>
          <h4>Answers</h4>
          <div id="answersList"></div>

          <div id="votingArea" class="hidden">
            <p>Discuss, then select who you think the Imposter is, then click <b>Submit Vote</b>:</p>
            <div id="voteButtons"></div>
            <div style="margin-top:8px;">
              <button id="submitVoteBtn" class="disabled" disabled>Submit Vote</button>
              <span id="voteCounter" class="muted small" style="margin-left:12px;"></span>
            </div>
          </div>

          <div id="votingResult" class="hidden"></div>
        </div>
      </section>

      <footer class="card muted small">
        Suggestions: use a timer, chat, or random avatars.
      </footer>
    </main>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js"></script>
</body>
</html>
